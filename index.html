<!DOCTYPE html>
<html style="height: 100%">
<head>
  <meta charset="utf-8" />
  <title>中国方言衰弱率地图</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
</head>
<body style="height: 100%; margin: 0">
  <div id="main" style="height: 100%"></div>

  <script>
    const myChart = echarts.init(document.getElementById('main'));
    myChart.showLoading();

    fetch('https://gitee.com/echarts-maps/china-geojson/raw/master/json/china.json')
      .then(res => res.json())
      .then(chinaJson => {
        myChart.hideLoading();
        echarts.registerMap('CHN', chinaJson);

        const data = [
          { name: '北京市', value: 0.85 },
          { name: '天津市', value: 0.68 },
          { name: '河北省', value: 0.42 },
          { name: '山西省', value: 0.39 },
          { name: '内蒙古自治区', value: 0.33 },
          { name: '辽宁省', value: 0.44 },
          { name: '吉林省', value: 0.38 },
          { name: '黑龙江省', value: 0.36 },
          { name: '上海市', value: 0.81 },
          { name: '江苏省', value: 0.55 },
          { name: '浙江省', value: 0.63 },
          { name: '安徽省', value: 0.47 },
          { name: '福建省', value: 0.51 },
          { name: '江西省', value: 0.45 },
          { name: '山东省', value: 0.53 },
          { name: '河南省', value: 0.49 },
          { name: '湖北省', value: 0.43 },
          { name: '湖南省', value: 0.40 },
          { name: '广东省', value: 0.72 },
          { name: '广西壮族自治区', value: 0.60 },
          { name: '海南省', value: 0.58 },
          { name: '重庆市', value: 0.52 },
          { name: '四川省', value: 0.46 },
          { name: '贵州省', value: 0.41 },
          { name: '云南省', value: 0.48 },
          { name: '西藏自治区', value: 0.30 },
          { name: '陕西省', value: 0.50 },
          { name: '甘肃省', value: 0.35 },
          { name: '青海省', value: 0.31 },
          { name: '宁夏回族自治区', value: 0.34 },
          { name: '新疆维吾尔自治区', value: 0.28 },
          { name: '香港特别行政区', value: 0.90 },
          { name: '澳门特别行政区', value: 0.88 },
          { name: '台湾省', value: 0.75 }
        ];

        data.sort((a, b) => a.value - b.value);

        const mapOption = {
          visualMap: {
            left: 'right',
            min: 0.2,
            max: 0.9,
            inRange: {
              color: ['#d73027', '#fdae61', '#fee08b', '#d9ef8b', '#66bd63', '#1a9850']
            },
            text: ['高衰弱率', '低衰弱率'],
            calculable: true
          },
          series: [{
            type: 'map',
            map: 'CHN',
            data: data
          }]
        };

        myChart.setOption(mapOption);
      });
  </script>
</body>
</html>
